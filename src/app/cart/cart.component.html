<div class="container  py-4 my-4">
    <div class=" d-flex justify-content-between align-items-center border-bottom p-3 bg-light">
        <div>
    <h3 class="text-uppercase ">shop cart</h3>
    <h6 class="text-main" *ngIf="ooh2 == true">TotalPrice: {{data2?.totalCartPrice|currency:' EGP '}} </h6>
    <h6 class="text-main" *ngIf="ooh2 == false">TotalPrice: {{0.00|currency:' EGP '}} </h6>
    <button class="btn bg-main text-white d-flex align-items-center justify-content-between me-4" data-bs-toggle="modal" data-bs-target="#modalId" >Online payment <img style="width: 60px;" class="ps-1" src="./assets/visa-and-mastercard-logo-26.png"></button>
</div>
    <div class="mt-3">
        <button class="btn btn-outline-danger mt-5" data-bs-toggle="modal" data-bs-target="#modalIddd" >Empty the cart</button>
    </div>
</div>

<div class="row align-items-center border-bottom py-3 shadow-sm my-3  bg-light mx-0" *ngFor="let product of data?.products , let i = index">
    <div class="col-md-2">
        <img [src]="product.product.imageCover" class="w-100">
    </div>
    <div class="col-md-10 d-flex justify-content-between ">
        <div>
        <h4 class="fw-bold">{{product.product.title}}</h4>
        <h6 class="text-main fs-4">Price: {{product.price}}</h6>
        <button class="btn btn-outline-danger" >
           
           <span (click)="getindex(i)"   data-bs-toggle="modal" data-bs-target="#modalIdd"><i class="fa-regular fa-trash-can" ></i> Remove</span> 

        </button>
    </div>
    <div class="d-flex  align-items-center">
        <button class="btn btn-outline-success btn-sm" (click)="updateitem(product.product._id ,product.count+1 ); product.count = product.count+1 ">+</button>
        <span class="mx-2">{{product.count}}</span>
        <button class="btn btn-outline-success btn-sm" (click)="updateitem(product.product._id , product.count-1 );product.count = product.count-1">-</button>
    </div>
    </div>
    <div class="modal fade" id="modalIdd" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
          <div class="modal-body text-center">
            <i class="fa-solid fa-circle-exclamation  text-danger ahma"></i>
            <h2 class="fw-bold">Are you sure you want to delete this item ?</h2>
          </div>
          <div class="modal-footer d-flex justify-content-start">
            <button class="btn btn-danger" data-bs-dismiss="modal">
            <span   (click)="deletitem(product.product._id);shownot()" data-bs-dismiss="modal"><i class="fa-regular fa-trash-can" ></i> Remove</span> 
          </button>
            <button type="button" class="btn bg-main text-white"  data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
</div>
<div class="modal fade" id="modalIddd" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
    <div class="modal-content">
      <div class="modal-body text-center">
        <i class="fa-solid fa-circle-exclamation  text-danger ahma"></i>
        <h2 class="fw-bold">Are you sure you want to delete All items ?</h2>
      </div>
      <div class="modal-footer d-flex justify-content-start">
        <div>
          <button class="btn btn-danger" (click)="deleteallcart(); data = []" data-bs-dismiss="modal">Empty the cart</button>
      </div>
        <button type="button" class="btn bg-main text-white"  data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
</div>
<!-- Modal Body -->
<!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->


<!-- Modal Body -->
<!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->
<div class="modal fade" id="modalId">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Checkout</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="checout" (ngSubmit)="handle(checout,data2._id)">
            <div class="form-floating mb-3">
                <input type="text" formControlName="details" class="form-control" id="floatingInput" placeholder="details">
                <label for="floatingInput">details</label>
              </div>
              <div class="form-floating mb-3">
                <input type="tel" formControlName="phone" class="form-control" id="floatingPassword" placeholder="phone">
                <label for="floatingPassword">phone</label>
              </div>
              <div class="form-floating mb-3">
                <input type="text" formControlName="city" class="form-control" id="floatingPassword" placeholder="city">
                <label for="floatingPassword">city</label>
              </div>
              <button  class="btn btn-primary me-2 mb-4" type="submit"><i *ngIf="ooh == false" class="fas fa-spinner fa-spin "></i><span *ngIf="ooh == true">checkout</span> <i class="fa-brands fa-cc-visa ms-3"></i></button>
              <button type="button" class="btn btn-secondary mb-4" data-bs-dismiss="modal">Close</button>
            </form>
        </div>
        
      </div>
    </div>
  </div>
 
 <!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->
<!-- Modal trigger button -->



<!-- Optional: Place to the bottom of scripts -->
 
 <!-- Optional: Place to the bottom of scripts -->
<!-- Optional: Place to the bottom of scripts -->
<script>
    const myModal = new bootstrap.Modal(document.getElementById('modalId'), options)

</script>